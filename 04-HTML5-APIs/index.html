<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
</head>
<body>
	<div >
	<textarea id="text" placeholder="Escribe algo..." ondrop="dropHandler(event);" >

	</textarea>
	</div>
	<button id="save">Guardar</button>
	<button id="clear">Borrar</button>
	
<script>
	var txtArea = document.getElementById('text');
	var btnSave = document.getElementById('save');
	var btnClear = document.getElementById('clear');

	window.addEventListener('load', (event) => {
		txtArea.value = localStorage.getItem('text');
	});

	btnSave.addEventListener("click", function () {
		localStorage.setItem('text', txtArea.value);
	});

	btnClear.addEventListener("click", function () {
		txtArea.value = "";
	});
	
	async function dropHandler(ev) {
  console.log('Fichero(s) arrastrados');

  // Evitar el comportamiendo por defecto (Evitar que el fichero se abra/ejecute)
  ev.preventDefault();
  

	let file = ev.dataTransfer.items[0].getAsFile()
	file = await file.text()
	txtArea.value = file
	
		
}


</script>
</body>
</html>